<script type="text/javascript">
    class Solution {
        i = 0;

        constructor() {
            this.i = 10;
        }

        format(board) {
            let that = this;
            let result = {}
            result['fillable'] = {};
            result['value'] = {};
            board.forEach(function (line, x) {
                line.forEach(function (value, y) {
                    if (value == '.') {
                        if (result['fillable'][x] === undefined) {
                            result['fillable'][x] = {}
                        }
                        if (result['fillable'][x][y] === undefined) {
                            result['fillable'][x][y] = {};
                        }
                        result['fillable'][x][y] = {'v': value, 'possible': that.get_possible(x, y, board)}
                    } else {
                        if (result['value'][x] === undefined) {
                            result['value'][x] = {}
                        }
                        result['value'][x][y] = value
                    }
                })

            })
            console.log(result)
        }

        get_possible(x, y, board) {
            let possible = {1: 1, 2: 2, 3: 3, 4: 4, 5: 5, 6: 6, 7: 7, 8: 8, 9: 9};
            let that = this;
            board.forEach(function (line, x1) {
                line.forEach(function (value, y1) {
                    if (value !== '.' && that.is_neighbor(x - 0, y - 0, x1 - 0, y1 - 0)) {
                        delete (possible[value - 0])
                    }
                })

            })
            return possible;
        }

        is_neighbor(x, y, x1, y1) {
            let minX = parseInt(x / 3) * 3;
            let minY = parseInt(y / 3) * 3;
            return x === x1 || y === y1 || (x1 >= minX && x1 <= minX + 2 && y1 >= minY && y1 <= minY + 2);
        }


        solveSudoku() {
            alert(this.i);
            return this.x + this.y;
        }
    }

    //board = [["5", "3", ".", ".", "7", ".", ".", ".", "."], ["6", ".", ".", "1", "9", "5", ".", ".", "."], [".", "9", "8", ".", ".", ".", ".", "6", "."], ["8", ".", ".", ".", "6", ".", ".", ".", "3"], ["4", ".", ".", "8", ".", "3", ".", ".", "1"], ["7", ".", ".", ".", "2", ".", ".", ".", "6"], [".", "6", ".", ".", ".", ".", "2", "8", "."], [".", ".", ".", "4", "1", "9", ".", ".", "5"], [".", ".", ".", ".", "8", ".", ".", "7", "9"]];
    board = [["5", "3", ".", ".", "7", ".", ".", ".", "."], ["6", "7", "2", "1", "9", "5", "3", "4", "8"], [".", "9", "8", ".", ".", ".", ".", "6", "."], ["8", ".", ".", ".", "6", ".", ".", ".", "3"], ["4", ".", ".", "8", ".", "3", ".", ".", "1"], ["7", ".", ".", ".", "2", ".", ".", ".", "6"], [".", "6", ".", ".", ".", ".", "2", "8", "."], [".", ".", ".", "4", "1", "9", ".", ".", "5"], [".", ".", ".", ".", "8", ".", ".", "7", "9"]];

    //console.log(board);

    //board = [["5", "3", ".", ".", "7", ".", ".", ".", "."]];

    Solution = new Solution(4, 5);
    Solution.format(board);

    // Solution.solveSudoku();
    //let a = Solution.get_possible();
    //console.log(a);


    //Solution.x = 2;
    //Solution.y = 3;
    // alert( Solution.solveSudoku());

</script>
